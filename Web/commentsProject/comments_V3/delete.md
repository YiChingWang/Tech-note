# 💬 Add Comment（留言系統）功能開發練習紀錄 - 加上 Delete Message 功能

## 🧠 開發重點與學習收穫

---

### ✅ 1. Array 更新方式與 Immutable 思維

在 JavaScript 中，更新 Array 有兩大類方法：

| 方法                 | 說明                               | 是否改動原陣列（in-place） |
| -------------------- | ---------------------------------- | -------------------------- |
| `findIndex + splice` | 直接改動原陣列，屬於 in-place 更新 | ✅ 會改原陣列              |
| `filter`、`map`      | 會回傳新陣列，不會改動原陣列       | ❌ 不改原陣列              |

**開發時通常會推薦用「回傳新陣列的方法」**，原因是：

- 避免改動原始資料（immutable）
- 可讀性高、錯誤率低
- 在現代框架（React、Vue）中特別重要

👉 從這裡我也理解到，為什麼刷題時會特別練習：

- In-place 更新（原地修改）
- 回傳新陣列（新資料）

---

### ✅ 2. 我常搞混 callback 的寫法（箭頭函數寫法）

| 寫法                     | 說明                             |
| ------------------------ | -------------------------------- |
| 簡寫箭頭函數（無大括號） | 一行程式碼，自動 return          |
| 箭頭函數 + 大括號        | 必須手動加上 `return` 才有回傳值 |

例子：

```js
// 簡寫（自動 return）
array.filter((item) => item > 0);

// 有大括號，必須手動 return
array.filter((item) => {
  return item > 0;
});
```

---

### ✅ 3. 500 Error 錯誤經驗：let 與 const 的使用關鍵

我一開始在寫 Delete API 時遇到 500 Error，  
以為是 API 的邏輯問題，結果真正原因是：

| 問題                       | 說明                                                   |
| -------------------------- | ------------------------------------------------------ |
| 用 `const` 宣告 `comments` | const 一旦賦值後，**不能重新賦值**（不能改變整個陣列） |
| 正確解法                   | 改用 `let`，才能用 `comments = latestComments` 更新    |

這個錯誤讓我更理解：

- **`const` 是不可重新賦值（不能改變整個變數）**
- **`let` 可重新賦值（可改變變數內容）**

---

### ✅ 4. Postman 使用經驗與 Debug 心法

我一開始在用 Postman 測試 API 時：

- 把 Body 放了很多資料，但我的 API 是從 URL 拿 id（`req.params`）
- 造成一直測不出來、混亂

後來我學到一個超重要觀念：

> **問 ChatGPT 時，不應該一直讓他幫我 Debug**，  
> 更好的問題是：「我應該怎麼 Debug？」或「我該怎麼查問題？」  
> 這樣才能學會自己 Debug，不是單純依賴答案。

---

## ✅ 小口訣總結：

| 重點              | 口訣                                     |
| ----------------- | ---------------------------------------- |
| 更新陣列          | 優先用回傳新陣列的方法（filter, map）    |
| callback 寫法     | 大括號要寫 return，沒大括號自動 return   |
| let 與 const 差異 | 需要重新賦值 → 用 let                    |
| Debug 心法        | 問「我該怎麼 Debug」而不是「幫我 Debug」 |
